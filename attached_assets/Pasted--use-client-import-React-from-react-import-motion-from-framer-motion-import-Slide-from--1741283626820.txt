'use client';

import React from 'react';
import { motion } from 'framer-motion';
import Slide from '@/components/core/Slide';
import { 
  Card, 
  CardGrid, 
  MetricCard, 
  MetricValue, 
  MetricLabel 
} from '@/components/core/Card';
import { 
  Box, 
  Typography, 
  Grid, 
  Paper, 
  useTheme 
} from '@mui/material';

// Motion components
const MotionBox = motion(Box);
const MotionPaper = motion(Paper);

// Animation variants
const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: 0.1
    }
  }
};

const itemVariants = {
  hidden: { opacity: 0, y: 20 },
  visible: {
    opacity: 1,
    y: 0,
    transition: {
      duration: 0.5,
      ease: "easeOut"
    }
  }
};

const EarlyTraction: React.FC = () => {
  const theme = useTheme();
  
  // Timeline milestones data
  const milestones = [
    {
      date: "Q3 2021",
      color: "military",
      index: 1,
      title: "MILITARY PILOT PROJECT_",
      description: "Initiated pilot with Fort Liberty logistics battalion. Deployed initial version focused on sensitive item tracking and maintenance management with blockchain verification.",
      metrics: [
        { label: "USERS", value: "350+", color: "military" },
        { label: "ITEMS TRACKED", value: "15,000", color: "military" }
      ]
    },
    {
      date: "Q1 2022",
      color: "commercial",
      index: 2,
      title: "FIRST COMMERCIAL CLIENT_",
      description: "Secured first enterprise customer - national retail chain with 3 distribution centers. System deployed for high-value inventory tracking and supplier verification.",
      metrics: [
        { label: "LOCATIONS", value: "3", color: "commercial" },
        { label: "INVENTORY VALUE", value: "$12M", color: "commercial" }
      ]
    },
    {
      date: "Q4 2022",
      color: "military",
      index: 3,
      title: "DOD CONTRACT AWARD_",
      description: "Secured $1.8M contract to deploy HandReceipt across three Army brigades. System now used for daily operations including weapons accountability, vehicle maintenance tracking, and supply chain management.",
      metrics: [
        { label: "CONTRACT VALUE", value: "$1.8M", color: "military" },
        { label: "PERSONNEL REACH", value: "8,500+", color: "military" }
      ]
    },
    {
      date: "Q2 2023",
      color: "commercial",
      index: 4,
      title: "COMMERCIAL EXPANSION_",
      description: "Expanded to 7 commercial clients including two Fortune 500 retailers and a major automotive parts distributor. Launched Shell Token payment system for accelerated supplier payments with integrated inventory verification.",
      metrics: [
        { label: "ACTIVE CLIENTS", value: "7", color: "commercial" },
        { label: "ARR GROWTH", value: "+185%", color: "commercial" }
      ]
    }
  ];
  
  // Client logos data
  const clients = [
    { name: "U.S. ARMY", color: "military" },
    { name: "DEFENSE LOGISTICS AGENCY", color: "military" },
    { name: "GLOBAL RETAIL CORP", color: "commercial" },
    { name: "LUXURY BRANDS INC", color: "commercial" },
    { name: "10TH MOUNTAIN DIV", color: "military" },
    { name: "FORT LIBERTY", color: "military" },
    { name: "AUTOPARTS DIRECT", color: "commercial" },
    { name: "TECHSUPPLY CO", color: "commercial" }
  ];

  return (
    <Slide title="Early Traction">
      <MotionBox
        variants={containerVariants}
        initial="hidden"
        animate="visible"
        sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}
      >
        {/* Key Metrics Section */}
        <Box sx={{ mb: 4 }}>
          <Typography variant="h3" sx={{
            fontSize: '1.25rem',
            fontWeight: 600,
            color: theme.palette.text.primary,
            mb: 1,
            fontFamily: "'IBM Plex Mono', monospace",
            textTransform: 'uppercase',
            letterSpacing: '1px'
          }}>
            KEY METRICS_
          </Typography>
          
          <Typography sx={{
            fontSize: '0.875rem',
            color: theme.palette.text.secondary,
            mb: 3,
            fontFamily: "'IBM Plex Mono', monospace"
          }}>
            Growth and adoption since founding in 2021
          </Typography>
          
          <CardGrid columns={4}>
            <MetricCard>
              <MetricValue color="commercial">12</MetricValue>
              <MetricLabel>Active Enterprise Clients</MetricLabel>
            </MetricCard>
            
            <MetricCard>
              <MetricValue color="military">$3.2M</MetricValue>
              <MetricLabel>Defense Contracts</MetricLabel>
            </MetricCard>
            
            <MetricCard>
              <MetricValue color="commercial">185%</MetricValue>
              <MetricLabel>YoY Revenue Growth</MetricLabel>
            </MetricCard>
            
            <MetricCard>
              <MetricValue color="gradient">10M+</MetricValue>
              <MetricLabel>Items Tracked Monthly</MetricLabel>
            </MetricCard>
          </CardGrid>
        </Box>
        
        {/* Timeline Section */}
        <Box sx={{ mb: 4 }}>
          <Typography variant="h3" sx={{
            fontSize: '1.25rem',
            fontWeight: 600,
            color: theme.palette.text.primary,
            mb: 1,
            fontFamily: "'IBM Plex Mono', monospace",
            textTransform: 'uppercase',
            letterSpacing: '1px'
          }}>
            GROWTH TIMELINE_
          </Typography>
          
          <Typography sx={{
            fontSize: '0.875rem',
            color: theme.palette.text.secondary,
            mb: 3,
            fontFamily: "'IBM Plex Mono', monospace"
          }}>
            Major milestones in our company history
          </Typography>
          
          <Box sx={{ position: 'relative', pl: 5, pb: 2 }}>
            {/* Timeline vertical line */}
            <Box sx={{
              position: 'absolute',
              top: 0,
              left: 12,
              bottom: 0,
              width: 2,
              bgcolor: theme.palette.divider,
              zIndex: 0
            }} />
            
            {/* Milestones */}
            {milestones.map((milestone, index) => (
              <Box key={index} sx={{ position: 'relative', mb: 3 }}>
                {/* Timeline marker */}
                <Box sx={{
                  position: 'absolute',
                  left: -24,
                  width: '1.5rem',
                  height: '1.5rem',
                  borderRadius: '50%',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  color: 'white',
                  fontFamily: "'IBM Plex Mono', monospace",
                  fontWeight: 'bold',
                  fontSize: '0.75rem',
                  zIndex: 1,
                  bgcolor: milestone.color === 'military' 
                    ? theme.customColors?.militaryAccent || theme.palette.info.main
                    : theme.customColors?.commercialAccent || theme.palette.warning.main
                }}>
                  {milestone.index}
                </Box>
                
                {/* Milestone card */}
                <MotionPaper
                  variants={itemVariants}
                  sx={{
                    bgcolor: theme.palette.background.paper,
                    border: `1px solid ${theme.palette.divider}`,
                    borderRadius: 1,
                    p: 3,
                    position: 'relative',
                    boxShadow: `0 0 15px ${theme.palette.mode === 'light' ? 'rgba(0, 0, 0, 0.1)' : 'rgba(0, 0, 0, 0.4)'}`,
                    transition: 'transform 0.2s ease, box-shadow 0.2s ease',
                    '&:hover': {
                      transform: 'translateY(-4px)',
                      boxShadow: `0 4px 20px ${theme.palette.mode === 'light' ? 'rgba(0, 0, 0, 0.15)' : 'rgba(0, 0, 0, 0.5)'}`
                    }
                  }}
                >
                  {/* Date badge */}
                  <Box sx={{
                    position: 'absolute',
                    top: -12,
                    left: 16,
                    bgcolor: theme.palette.background.default,
                    px: 2,
                    py: 0.5,
                    fontSize: '0.8rem',
                    fontWeight: 600,
                    fontFamily: "'IBM Plex Mono', monospace",
                    color: theme.palette.text.secondary,
                    borderRadius: 5,
                    border: `1px solid ${theme.palette.divider}`
                  }}>
                    {milestone.date}
                  </Box>
                  
                  {/* Milestone content */}
                  <Typography variant="h6" sx={{
                    fontSize: '1rem',
                    fontWeight: 600,
                    fontFamily: "'IBM Plex Mono', monospace",
                    color: milestone.color === 'military' 
                      ? theme.customColors?.militaryAccent || theme.palette.info.main
                      : theme.customColors?.commercialAccent || theme.palette.warning.main,
                    mb: 2
                  }}>
                    {milestone.title}
                  </Typography>
                  
                  <Typography sx={{
                    fontSize: '0.85rem',
                    color: theme.palette.text.secondary,
                    mb: 2,
                    lineHeight: 1.6
                  }}>
                    {milestone.description}
                  </Typography>
                  
                  {/* Metrics */}
                  <Grid container spacing={2}>
                    {milestone.metrics.map((metric, idx) => (
                      <Grid item xs={6} key={idx}>
                        <Box sx={{
                          display: 'flex',
                          flexDirection: 'column',
                          alignItems: 'center',
                          p: 1,
                          borderRadius: 1,
                          bgcolor: metric.color === 'military' 
                            ? theme.customColors?.militaryBg || '#e6f0fa'
                            : theme.customColors?.commercialBg || '#f8f1e6'
                        }}>
                          <Typography sx={{
                            fontSize: '0.7rem',
                            fontWeight: 600,
                            fontFamily: "'IBM Plex Mono', monospace",
                            color: theme.palette.text.secondary
                          }}>
                            {metric.label}
                          </Typography>
                          <Typography sx={{
                            fontSize: '1.25rem',
                            fontWeight: 700,
                            color: metric.color === 'military' 
                              ? theme.customColors?.militaryAccent || theme.palette.info.main
                              : theme.customColors?.commercialAccent || theme.palette.warning.main
                          }}>
                            {metric.value}
                          </Typography>
                        </Box>
                      </Grid>
                    ))}
                  </Grid>
                </MotionPaper>
              </Box>
            ))}
          </Box>
        </Box>
        
        {/* Clients Section */}
        <Box>
          <Typography variant="h3" sx={{
            fontSize: '1.25rem',
            fontWeight: 600,
            color: theme.palette.text.primary,
            mb: 1,
            fontFamily: "'IBM Plex Mono', monospace",
            textTransform: 'uppercase',
            letterSpacing: '1px'
          }}>
            SELECT CLIENTS_
          </Typography>
          
          <Typography sx={{
            fontSize: '0.875rem',
            color: theme.palette.text.secondary,
            mb: 3,
            fontFamily: "'IBM Plex Mono', monospace"
          }}>
            Current deployments across defense and commercial sectors
          </Typography>
          
          <Grid container spacing={2}>
            {clients.map((client, index) => (
              <Grid item xs={6} sm={3} key={index}>
                <MotionPaper
                  variants={itemVariants}
                  sx={{
                    height: 100,
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    textAlign: 'center',
                    p: 2,
                    bgcolor: client.color === 'military' 
                      ? theme.customColors?.militaryBg || '#e6f0fa'
                      : theme.customColors?.commercialBg || '#f8f1e6',
                    border: `1px solid ${client.color === 'military' 
                      ? theme.customColors?.militaryAccent || theme.palette.info.main
                      : theme.customColors?.commercialAccent || theme.palette.warning.main}`,
                    borderRadius: 1
                  }}
                >
                  <Typography sx={{
                    fontWeight: 600,
                    fontSize: '0.8rem',
                    fontFamily: "'IBM Plex Mono', monospace",
                    color: client.color === 'military' 
                      ? theme.customColors?.militaryAccent || theme.palette.info.main
                      : theme.customColors?.commercialAccent || theme.palette.warning.main
                  }}>
                    {client.name}
                  </Typography>
                </MotionPaper>
              </Grid>
            ))}
          </Grid>
        </Box>
      </MotionBox>
    </Slide>
  );
};

export default EarlyTraction;
