'use client';

import React from 'react';
import { motion } from 'framer-motion';
import Slide from '@/components/core/Slide';
import { 
  Box, 
  Typography, 
  Grid, 
  Paper,
  useTheme,
  Stepper,
  Step,
  StepLabel,
  StepContent,
  StepConnector,
  Card,
  CardContent,
  Divider,
  styled
} from '@mui/material';
import CheckCircleIcon from '@mui/icons-material/CheckCircle';
import TrendingUpIcon from '@mui/icons-material/TrendingUp';
import SchoolIcon from '@mui/icons-material/School';
import GroupsIcon from '@mui/icons-material/Groups';
import BarChartIcon from '@mui/icons-material/BarChart';
import RocketLaunchIcon from '@mui/icons-material/RocketLaunch';

// Motion components
const MotionBox = motion(Box);
const MotionPaper = motion(Paper);
const MotionCard = motion(Card);
const MotionTypography = motion(Typography);

// Animation variants
const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: 0.1
    }
  }
};

const itemVariants = {
  hidden: { opacity: 0, y: 20 },
  visible: {
    opacity: 1,
    y: 0,
    transition: { duration: 0.5, ease: "easeOut" }
  }
};

// Custom styled components
const CustomStepConnector = styled(StepConnector)(({ theme }) => ({
  [`& .MuiStepConnector-line`]: {
    borderColor: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)',
    borderLeftWidth: 2,
    minHeight: 40
  }
}));

const CustomStepLabel = styled(StepLabel)(({ theme }) => ({
  "& .MuiStepLabel-label": {
    fontFamily: "'IBM Plex Mono', monospace",
    fontWeight: 600,
    fontSize: '0.95rem',
    color: theme.palette.text.primary
  },
  "& .MuiStepLabel-label.Mui-completed": {
    color: theme.palette.primary.main
  }
}));

// Milestone data
const milestones = [
  {
    title: "Seed Round & MVP Build (Q2 2025)",
    description: "Close $2.2M seed round and finalize the core product MVP for initial deployments",
    icon: <CheckCircleIcon />,
    objectives: [
      "Complete $2.2M seed funding with strategic investors",
      "Finalize core computer vision technology for pilot deployments",
      "Establish initial defense sector partnerships (2-3 pilots)",
      "Build core engineering team (7-9 engineers)"
    ],
    metrics: {
      team: "10-12 team members",
      arr: "$0",
      burn: "$95-110K monthly",
      runway: "24+ months"
    }
  },
  {
    title: "Commercial Validation (Q3-Q4 2025)",
    description: "Launch pilot programs with defense and commercial customers to validate the technology",
    icon: <SchoolIcon />,
    objectives: [
      "Deploy to 2-3 defense sector customers",
      "Launch 2 commercial pilot programs",
      "Initial case studies and ROI documentation",
      "Complete security compliance and certification process"
    ],
    metrics: {
      team: "14-16 team members",
      arr: "$175K",
      burn: "$110-130K monthly",
      runway: "16-18 months"
    }
  },
  {
    title: "Market Expansion (Q1-Q2 2026)",
    description: "Convert pilot customers to paying contracts and expand market presence",
    icon: <GroupsIcon />,
    objectives: [
      "Establish sales team for both defense and commercial sectors",
      "Convert 75% of pilot customers to paying contracts",
      "Expand to 5-8 total customers",
      "Develop strategic partnerships for market expansion"
    ],
    metrics: {
      team: "18-20 team members",
      arr: "$1.2M",
      burn: "$130-160K monthly",
      runway: "10-12 months"
    }
  },
  {
    title: "Growth Acceleration (Q3-Q4 2026)",
    description: "Scale operations and prepare for Series A funding round",
    icon: <TrendingUpIcon />,
    objectives: [
      "Develop and launch additional product features",
      "Expand to 15-20 enterprise customers",
      "Strengthen leadership team with key executive hires",
      "Prepare comprehensive Series A funding materials"
    ],
    metrics: {
      team: "24-28 team members",
      arr: "$3.6-4.2M",
      burn: "$170-210K monthly",
      runway: "4-6 months"
    }
  },
  {
    title: "Series A Funding (Q1 2027)",
    description: "Secure Series A funding to accelerate growth and expand market reach",
    icon: <RocketLaunchIcon />,
    objectives: [
      "Close $12-15M Series A funding round",
      "Accelerate global market expansion",
      "Launch complete product suite",
      "Scale team and operations for continued growth"
    ],
    metrics: {
      team: "35-40 team members",
      arrnext: "$8-10M (first year post-Series A)",
      valuation: "$45-60M",
      runway: "24-30 months"
    }
  }
];

const SeedToSeriesARoadmap: React.FC = () => {
  const theme = useTheme();
  
  return (
    <Slide title="Seed to Series A Roadmap">
      <MotionBox
        variants={containerVariants}
        initial="hidden"
        animate="visible"
        sx={{ 
          height: '100%',
          display: 'flex',
          flexDirection: 'column'
        }}
      >
        <Grid container spacing={4}>
          {/* Main Roadmap Timeline */}
          <Grid item xs={12} md={7}>
            <MotionPaper
              variants={itemVariants}
              sx={{ 
                p: 3, 
                height: '100%',
                borderRadius: 2,
                border: `1px solid ${theme.palette.divider}`,
                boxShadow: theme.shadows[2],
                overflow: 'auto'
              }}
            >
              <Typography sx={{
                fontSize: '1.25rem',
                fontWeight: 600,
                mb: 3,
                fontFamily: "'IBM Plex Mono', monospace",
                textTransform: 'uppercase',
                letterSpacing: '1px'
              }}>
                EXECUTION PLAN_
              </Typography>
              
              <Box sx={{ maxWidth: '100%', px: 1 }}>
                <Stepper orientation="vertical" connector={<CustomStepConnector />}>
                  {milestones.map((milestone, index) => (
                    <Step key={index} active={true} completed={index === 0}>
                      <CustomStepLabel 
                        StepIconProps={{ 
                          icon: milestone.icon,
                          completed: index === 0
                        }}
                      >
                        {milestone.title}
                      </CustomStepLabel>
                      <StepContent>
                        <Box sx={{ mb: 2 }}>
                          <Typography variant="body2" color="text.secondary" sx={{ mb: 2 }}>
                            {milestone.description}
                          </Typography>
                          
                          <Paper elevation={0} sx={{ 
                            p: 2, 
                            mb: 2, 
                            bgcolor: theme.palette.mode === 'dark' ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.02)',
                            border: `1px solid ${theme.palette.divider}`,
                            borderRadius: 1
                          }}>
                            <Typography variant="subtitle2" sx={{ mb: 1, fontWeight: 600 }}>
                              Key Objectives:
                            </Typography>
                            <Box component="ul" sx={{ pl: 2, mb: 0, mt: 0 }}>
                              {milestone.objectives.map((objective, i) => (
                                <Box component="li" key={i} sx={{ mb: 0.5 }}>
                                  <Typography variant="body2">
                                    {objective}
                                  </Typography>
                                </Box>
                              ))}
                            </Box>
                          </Paper>
                          
                          <Grid container spacing={1}>
                            {Object.entries(milestone.metrics).map(([key, value], i) => (
                              <Grid item xs={6} sm={3} key={i}>
                                <Box sx={{ 
                                  p: 1, 
                                  textAlign: 'center',
                                  borderRadius: 1,
                                  border: `1px solid ${theme.palette.divider}`,
                                  bgcolor: theme.palette.background.paper
                                }}>
                                  <Typography variant="caption" color="text.secondary" sx={{ 
                                    textTransform: 'uppercase',
                                    fontFamily: "'IBM Plex Mono', monospace",
                                    display: 'block',
                                    fontSize: '0.65rem'
                                  }}>
                                    {key === 'team' ? 'Team Size' : 
                                     key === 'arrnext' ? 'Next Year ARR' :
                                     key === 'arr' ? 'ARR' : 
                                     key === 'burn' ? 'Monthly Burn' : 
                                     key === 'runway' ? 'Runway' : 
                                     key === 'valuation' ? 'Valuation' : key}
                                  </Typography>
                                  <Typography variant="body2" sx={{ fontWeight: 600 }}>
                                    {value}
                                  </Typography>
                                </Box>
                              </Grid>
                            ))}
                          </Grid>
                        </Box>
                      </StepContent>
                    </Step>
                  ))}
                </Stepper>
              </Box>
            </MotionPaper>
          </Grid>
          
          {/* Key Milestones and Success Criteria */}
          <Grid item xs={12} md={5}>
            <Grid container spacing={3} direction="column" sx={{ height: '100%' }}>
              {/* Success Criteria */}
              <Grid item xs={12}>
                <MotionCard
                  variants={itemVariants}
                  sx={{ 
                    borderRadius: 2,
                    border: `1px solid ${theme.palette.divider}`,
                    boxShadow: theme.shadows[2],
                    height: '100%'
                  }}
                >
                  <CardContent sx={{ p: 3 }}>
                    <Typography sx={{
                      fontSize: '1.15rem',
                      fontWeight: 600,
                      mb: 2,
                      fontFamily: "'IBM Plex Mono', monospace",
                      textTransform: 'uppercase',
                      letterSpacing: '1px'
                    }}>
                      SERIES A SUCCESS CRITERIA_
                    </Typography>
                    
                    <Typography variant="body2" color="text.secondary" sx={{ mb: 3 }}>
                      Key metrics and milestones required to successfully raise our Series A round
                    </Typography>
                    
                    <Grid container spacing={2}>
                      <Grid item xs={6}>
                        <Box sx={{ 
                          p: 2, 
                          borderRadius: 2,
                          textAlign: 'center',
                          border: `1px solid ${theme.palette.primary.main}`,
                          bgcolor: theme.palette.mode === 'dark' ? 'rgba(144, 202, 249, 0.08)' : 'rgba(144, 202, 249, 0.12)',
                          mb: 1
                        }}>
                          <Typography variant="h4" color="primary" sx={{ fontWeight: 700, mb: 0.5 }}>
                            $4M+
                          </Typography>
                          <Typography variant="body2" sx={{ fontWeight: 600 }}>
                            Annual Recurring Revenue
                          </Typography>
                        </Box>
                      </Grid>
                      
                      <Grid item xs={6}>
                        <Box sx={{ 
                          p: 2, 
                          borderRadius: 2,
                          textAlign: 'center',
                          border: `1px solid ${theme.palette.secondary.main}`,
                          bgcolor: theme.palette.mode === 'dark' ? 'rgba(244, 143, 177, 0.08)' : 'rgba(244, 143, 177, 0.12)',
                          mb: 1
                        }}>
                          <Typography variant="h4" color="secondary" sx={{ fontWeight: 700, mb: 0.5 }}>
                            15-20
                          </Typography>
                          <Typography variant="body2" sx={{ fontWeight: 600 }}>
                            Enterprise Customers
                          </Typography>
                        </Box>
                      </Grid>
                      
                      <Grid item xs={6}>
                        <Box sx={{ 
                          p: 2, 
                          borderRadius: 2,
                          textAlign: 'center',
                          border: `1px solid ${theme.palette.success.main}`,
                          bgcolor: theme.palette.mode === 'dark' ? 'rgba(129, 199, 132, 0.08)' : 'rgba(129, 199, 132, 0.12)'
                        }}>
                          <Typography variant="h4" sx={{ color: theme.palette.success.main, fontWeight: 700, mb: 0.5 }}>
                            80%+
                          </Typography>
                          <Typography variant="body2" sx={{ fontWeight: 600 }}>
                            Gross Margin
                          </Typography>
                        </Box>
                      </Grid>
                      
                      <Grid item xs={6}>
                        <Box sx={{ 
                          p: 2, 
                          borderRadius: 2,
                          textAlign: 'center',
                          border: `1px solid ${theme.palette.info.main}`,
                          bgcolor: theme.palette.mode === 'dark' ? 'rgba(79, 195, 247, 0.08)' : 'rgba(79, 195, 247, 0.12)'
                        }}>
                          <Typography variant="h4" sx={{ color: theme.palette.info.main, fontWeight: 700, mb: 0.5 }}>
                            125%+
                          </Typography>
                          <Typography variant="body2" sx={{ fontWeight: 600 }}>
                            YoY Growth Rate
                          </Typography>
                        </Box>
                      </Grid>
                    </Grid>
                  </CardContent>
                </MotionCard>
              </Grid>
              
              {/* Use of Series A Funds */}
              <Grid item xs={12}>
                <MotionCard
                  variants={itemVariants}
                  sx={{ 
                    borderRadius: 2,
                    border: `1px solid ${theme.palette.divider}`,
                    boxShadow: theme.shadows[2],
                    height: '100%'
                  }}
                >
                  <CardContent sx={{ p: 3 }}>
                    <Typography sx={{
                      fontSize: '1.15rem',
                      fontWeight: 600,
                      mb: 2,
                      fontFamily: "'IBM Plex Mono', monospace",
                      textTransform: 'uppercase',
                      letterSpacing: '1px'
                    }}>
                      SERIES A USE OF FUNDS_
                    </Typography>
                    
                    <Typography variant="body2" color="text.secondary" sx={{ mb: 3 }}>
                      How we'll deploy the $12-15M Series A capital to scale the business
                    </Typography>
                    
                    <Box>
                      {/* Engineering & Product */}
                      <Box sx={{ mb: 2 }}>
                        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 0.5 }}>
                          <Box sx={{ display: 'flex', alignItems: 'center' }}>
                            <BarChartIcon fontSize="small" sx={{ color: theme.palette.primary.main, mr: 1 }} />
                            <Typography variant="body2" sx={{ fontWeight: 600 }}>
                              Engineering & Product
                            </Typography>
                          </Box>
                          <Typography variant="body2" sx={{ fontWeight: 700 }}>
                            45%
                          </Typography>
                        </Box>
                        <Box sx={{ width: '100%', height: '12px', bgcolor: 'rgba(0,0,0,0.05)', borderRadius: 1, overflow: 'hidden' }}>
                          <MotionBox
                            initial={{ width: 0 }}
                            animate={{ width: '45%' }}
                            transition={{ duration: 1, delay: 0.1 }}
                            sx={{ height: '100%', bgcolor: theme.palette.primary.main, borderRadius: 1 }}
                          />
                        </Box>
                      </Box>
                      
                      {/* Sales & Marketing */}
                      <Box sx={{ mb: 2 }}>
                        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 0.5 }}>
                          <Box sx={{ display: 'flex', alignItems: 'center' }}>
                            <BarChartIcon fontSize="small" sx={{ color: theme.palette.secondary.main, mr: 1 }} />
                            <Typography variant="body2" sx={{ fontWeight: 600 }}>
                              Sales & Marketing
                            </Typography>
                          </Box>
                          <Typography variant="body2" sx={{ fontWeight: 700 }}>
                            35%
                          </Typography>
                        </Box>
                        <Box sx={{ width: '100%', height: '12px', bgcolor: 'rgba(0,0,0,0.05)', borderRadius: 1, overflow: 'hidden' }}>
                          <MotionBox
                            initial={{ width: 0 }}
                            animate={{ width: '35%' }}
                            transition={{ duration: 1, delay: 0.2 }}
                            sx={{ height: '100%', bgcolor: theme.palette.secondary.main, borderRadius: 1 }}
                          />
                        </Box>
                      </Box>
                      
                      {/* International Expansion */}
                      <Box sx={{ mb: 2 }}>
                        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 0.5 }}>
                          <Box sx={{ display: 'flex', alignItems: 'center' }}>
                            <BarChartIcon fontSize="small" sx={{ color: theme.palette.success.main, mr: 1 }} />
                            <Typography variant="body2" sx={{ fontWeight: 600 }}>
                              International Expansion
                            </Typography>
                          </Box>
                          <Typography variant="body2" sx={{ fontWeight: 700 }}>
                            15%
                          </Typography>
                        </Box>
                        <Box sx={{ width: '100%', height: '12px', bgcolor: 'rgba(0,0,0,0.05)', borderRadius: 1, overflow: 'hidden' }}>
                          <MotionBox
                            initial={{ width: 0 }}
                            animate={{ width: '15%' }}
                            transition={{ duration: 1, delay: 0.3 }}
                            sx={{ height: '100%', bgcolor: theme.palette.success.main, borderRadius: 1 }}
                          />
                        </Box>
                      </Box>
                      
                      {/* Operations & G&A */}
                      <Box>
                        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 0.5 }}>
                          <Box sx={{ display: 'flex', alignItems: 'center' }}>
                            <BarChartIcon fontSize="small" sx={{ color: theme.palette.info.main, mr: 1 }} />
                            <Typography variant="body2" sx={{ fontWeight: 600 }}>
                              Operations & G&A
                            </Typography>
                          </Box>
                          <Typography variant="body2" sx={{ fontWeight: 700 }}>
                            5%
                          </Typography>
                        </Box>
                        <Box sx={{ width: '100%', height: '12px', bgcolor: 'rgba(0,0,0,0.05)', borderRadius: 1, overflow: 'hidden' }}>
                          <MotionBox
                            initial={{ width: 0 }}
                            animate={{ width: '5%' }}
                            transition={{ duration: 1, delay: 0.4 }}
                            sx={{ height: '100%', bgcolor: theme.palette.info.main, borderRadius: 1 }}
                          />
                        </Box>
                      </Box>
                    </Box>
                  </CardContent>
                </MotionCard>
              </Grid>
            </Grid>
          </Grid>
        </Grid>
      </MotionBox>
    </Slide>
  );
};

export default SeedToSeriesARoadmap;
